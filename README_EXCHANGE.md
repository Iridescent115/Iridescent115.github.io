# 银行汇率查询系统 - 使用说明

## 📋 系统说明

这是一个银行汇率查询系统，包含：
- **前端页面**：exchange.html（浏览器界面）
- **后端服务**：exchange_backend.py（Python Flask服务）

## 🚀 快速启动

### 第一步：安装 Python 依赖

在 PowerShell 中运行：

```powershell
# 进入项目目录
cd f:\HomePage

# 安装依赖包
pip install -r requirements.txt
```

### 第二步：启动后端服务

```powershell
python exchange_backend.py
```

看到以下信息表示启动成功：
```
============================================================
银行汇率查询后端服务启动中...
服务地址: http://localhost:5000
API接口: http://localhost:5000/api/rates?currency=USD&tradeType=buy
============================================================
 * Running on http://0.0.0.0:5000
```

### 第三步：打开前端页面

用浏览器打开 `exchange.html` 文件，或访问：
```
file:///f:/HomePage/exchange.html
```

## 📊 功能说明

### 支持的银行
- ✅ 中国银行（部分支持爬取）
- ⚠️ 中国工商银行（使用估算）
- ⚠️ 中国建设银行（使用估算）
- ⚠️ 中国农业银行（使用估算）
- ⚠️ 交通银行（使用估算）
- ⚠️ 兴业银行（使用估算）

### 支持的货币
- 美元 (USD)
- 欧元 (EUR)
- 港币 (HKD)
- 日元 (JPY)
- 韩元 (KRW)
- 马来西亚林吉特 (MYR)

### 数据来源标识
- **✓ 官网数据**：成功从银行官网爬取的实时数据
- **⚠ 估算数据**：基于国际市场汇率估算（当银行官网无法访问时）

## 🔧 技术架构

```
前端 (HTML/JavaScript)
    ↓ HTTP请求
后端 (Python Flask) 
    ↓ 爬虫/API
银行官网 / 汇率API
```

## ⚠️ 重要说明

### 为什么有些银行显示"估算数据"？

各银行网站的反爬虫机制不同，可能遇到：
1. **动态加载**：需要JavaScript渲染
2. **验证码保护**：需要人机验证
3. **API加密**：需要特殊的token
4. **IP限制**：频繁访问会被封禁

### 如何提高成功率？

1. **使用代理IP**：避免被封禁
2. **添加延迟**：降低请求频率
3. **模拟浏览器**：使用Selenium等工具
4. **购买API**：使用商业金融数据接口

## 🛠️ 进阶配置

### 如果需要更准确的数据

可以考虑：
1. 使用 Selenium 模拟真实浏览器
2. 购买商业汇率数据API（如：聚合数据、阿里云市场）
3. 定时任务缓存数据，减少实时请求

### 修改后端代码

编辑 `exchange_backend.py` 中的爬虫函数：
```python
def get_boc_rate(currency):
    # 在这里添加你的爬虫逻辑
    pass
```

## 📝 常见问题

### Q1: 提示"无法连接到后端服务"
**A**: 确保已经启动 Python 后端服务（`python exchange_backend.py`）

### Q2: 所有银行都显示"估算数据"
**A**: 这是正常的，因为银行网站有反爬虫保护。你可以：
- 查看后端控制台的错误信息
- 尝试改进爬虫代码
- 或接受使用国际市场汇率估算

### Q3: 如何部署到服务器？
**A**: 
1. 将后端部署到云服务器（腾讯云、阿里云等）
2. 修改前端的 `API_BASE_URL` 为服务器地址
3. 配置Nginx反向代理（可选）

### Q4: 汇率更新频率？
**A**: 每次点击"查询汇率"按钮都会实时请求最新数据

## 📞 技术支持

如果遇到问题，请检查：
1. Python版本（建议3.8+）
2. 依赖包是否正确安装
3. 后端服务是否正常运行
4. 浏览器控制台是否有错误信息

## 📄 开源协议

本项目仅供学习交流使用，请遵守相关法律法规和银行网站的使用条款。
